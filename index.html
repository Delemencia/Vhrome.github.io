<!DOCTYPE html>
<html>
<head>
<title>Vhrome! HTML</title>
<style>
  :root { --bg: #f2f2f2; --tab-inactive: #bcbcbc; --text: #5a5a5a; --border: #d2d2d2; }
  body, html { margin: 0; padding: 0; height: 100%; font-family: "Segoe UI", Tahoma, sans-serif; overflow: hidden; background-color: var(--bg); }
  .browser { display: flex; flex-direction: column; height: 100vh; }
  .tab-strip { background: #d0d0d0; padding-top: 8px; display: flex; align-items: flex-end; padding-left: 8px; border-bottom: 1px solid #999; height: 34px; }
  .vhrome-logo { font-weight: bold; color: var(--text); font-size: 14px; margin-right: 15px; margin-bottom: 5px; font-style: italic; cursor: pointer; }
  .tab { position: relative; height: 28px; width: 160px; background: var(--tab-inactive); margin-right: -15px; display: flex; align-items: center; padding-left: 20px; font-size: 11px; clip-path: polygon(10% 0, 90% 0, 100% 100%, 0% 100%); border-top: 1px solid #aaa; cursor: pointer; z-index: 1; }
  .tab.active { background: var(--bg); z-index: 5; height: 30px; border-top: 1px solid #bababa; }
  .tab-close { position: absolute; right: 18px; font-size: 12px; display: none; }
  .tab.active .tab-close { display: block; }
  .new-tab-btn { width: 28px; height: 18px; background: var(--tab-inactive); margin-left: 20px; margin-bottom: 4px; transform: skewX(25deg); border-radius: 2px; border: 1px solid #aaa; cursor: pointer; }
  .toolbar { background: var(--bg); padding: 4px 8px; display: flex; align-items: center; gap: 8px; border-bottom: 1px solid var(--border); position: relative; }
  .nav-btn { color: var(--text); font-size: 18px; cursor: pointer; padding: 0 4px; user-select: none; }
  .address-bar { flex-grow: 1; background: white; border: 1px solid #bebebe; border-radius: 2px; padding: 3px 8px; font-size: 13px; display: flex; align-items: center; }
  .address-bar input { border: none; outline: none; width: 100%; font-family: inherit; }
  .viewport-container { flex-grow: 1; background: white; position: relative; }
  iframe { width: 100%; height: 100%; border: none; display: none; background: white; }
  iframe.active { display: block; }
</style>
</head>
<body>
<div class="browser">
  <div class="tab-strip" id="tabStrip">
    <div class="vhrome-logo" onclick="loadHome()">Vhrome</div>
    <div class="tab active" onclick="switchTab(0)" id="tab-0">
      <span class="tab-title">Vhrome UI Editor</span>
      <span class="tab-close" onclick="event.stopPropagation(); closeTab(0)">×</span>
    </div>
    <div class="new-tab-btn" onclick="addNewTab()"></div>
  </div>
  <div class="toolbar">
    <div class="nav-btn" onclick="reloadFrame()">&#8635;</div>
    <div class="address-bar">
      <input type="text" id="urlInput" placeholder="Type Vhrome.org or search..." onkeydown="if(event.key==='Enter') navigate()">
    </div>
    <div class="nav-btn">&#8942;</div>
  </div>
  <div class="viewport-container" id="viewportContainer">
    <iframe id="frame-0" class="active"></iframe>
  </div>
</div>

<script>
  let tabCount = 1;
  let activeId = 0;

  const homeHTML = `
    <body style="font-family:sans-serif; text-align:center; padding:50px; background:#f9f9f9;">
      <h1 style="color:#5a5a5a; font-style:italic;">Vhrome.org Editor</h1>
      <p>Type your HTML code below to render it in this tab:</p>
      <textarea id="code" style="width:80%; height:200px; padding:10px; border:1px solid #ccc; font-family:monospace;"></textarea><br><br>
      <button onclick="run()" style="padding:10px 20px; cursor:pointer; background:#bcbcbc; border:1px solid #aaa;">Run HTML Code</button>
      <script>
        function run() {
          const html = document.getElementById('code').value;
          document.body.innerHTML = html;
        }
      <\/script>
    </body>
  `;

  window.onload = () => { document.getElementById('frame-0').srcdoc = homeHTML; };

  function loadHome() {
    document.getElementById('urlInput').value = "Vhrome.org";
    document.getElementById('frame-' + activeId).srcdoc = homeHTML;
    document.querySelector('#tab-' + activeId + ' .tab-title').innerText = "Vhrome.org";
  }

  function navigate() {
    let input = document.getElementById('urlInput').value;
    if (input.toLowerCase() === "vhrome.org") {
      loadHome();
      return;
    }
    
    let finalUrl;
    if (!input.includes('.') || input.includes(' ')) {
        finalUrl = "https://www.bing.com/search?q=" + encodeURIComponent(input);
    } else {
        finalUrl = input.startsWith('http') ? input : 'https://' + input;
    }

    let proxiedUrl = "https://api.allorigins.win/raw?url=" + encodeURIComponent(finalUrl);
    document.getElementById('frame-' + activeId).srcdoc = ""; 
    document.getElementById('frame-' + activeId).src = proxiedUrl;
    document.querySelector('#tab-' + activeId + ' .tab-title').innerText = input;
  }

  function switchTab(id) {
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('iframe').forEach(f => f.classList.remove('active'));
    document.getElementById('tab-' + id).classList.add('active');
    document.getElementById('frame-' + id).classList.add('active');
    activeId = id;
  }

  function addNewTab() {
    const id = tabCount++;
    const newTab = document.createElement('div');
    newTab.className = 'tab';
    newTab.id = 'tab-' + id;
    newTab.onclick = () => switchTab(id);
    newTab.innerHTML = `<span class="tab-title">New Tab</span><span class="tab-close" onclick="event.stopPropagation(); closeTab(${id})">×</span>`;
    document.getElementById('tabStrip').insertBefore(newTab, document.querySelector('.new-tab-btn'));
    const newFrame = document.createElement('iframe');
    newFrame.id = 'frame-' + id;
    newFrame.srcdoc = homeHTML;
    document.getElementById('viewportContainer').appendChild(newFrame);
    switchTab(id);
  }

  function closeTab(id) {
    document.getElementById('tab-' + id).remove();
    document.getElementById('frame-' + id).remove();
    if (activeId === id) {
       const tabs = document.querySelectorAll('.tab');
       if (tabs.length > 0) switchTab(tabs[tabs.length-1].id.split('-')[1]);
    }
  }

  function reloadFrame() { document.getElementById('frame-' + activeId).src += ''; }
</script>
</body>
</html>
